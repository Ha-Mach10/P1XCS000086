<Window
	x:Class="P1XCS000086.Views.MainWindow"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:core="clr-namespace:P1XCS000086.Core;assembly=P1XCS000086.Core"
	xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
	xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
	xmlns:mahIcon="http://metro.mahapps.com/winfx/xaml/iconpacks"
	xmlns:mdMetro="http://materialdesigninxaml.net/winfx/xaml/themes"
	xmlns:prism="http://prismlibrary.com/"
	Title="{Binding Title}"
	Width="1300"
	Height="1200"
	prism:ViewModelLocator.AutoWireViewModel="True">

	<Window.Resources>
		<ResourceDictionary>
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/VS/Controls.xaml" />
				<ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/VS/Colors.xaml" />

				<ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.ToggleButton.xaml" />
			</ResourceDictionary.MergedDictionaries>
		</ResourceDictionary>
	</Window.Resources>

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>

		<Menu>
			<MenuItem Header="ファイル(_f)" />
		</Menu>

		<TabControl Grid.Row="1" SelectedIndex="{Binding SelectedTabIndex.Value}">
			<TabItem Style="{StaticResource MahApps.Styles.TabItem}">
				<TabItem.Header>
					<HeaderedContentControl>
						<TextBlock Margin="8,0,8,0" Text="台帳管理" />
					</HeaderedContentControl>
				</TabItem.Header>
				<Grid>
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="111"/>
						<ColumnDefinition Width="Auto"/>
						<ColumnDefinition />
					</Grid.ColumnDefinitions>
					<VirtualizingStackPanel Orientation="Horizontal" Grid.ColumnSpan="2">
						<VirtualizingStackPanel>
							<TextBlock Margin="4,8,0,8" Text="台帳操作" />
							<Button Height="30" Margin="8,0,8,0" Command="{Binding CodeManagerTransition}" CommandParameter="CodeManageViewer">
								<Button.Content>
									<WrapPanel Orientation="Horizontal">
										<mahIcon:PackIconMaterial Kind="TableSearch" Margin="16,0,8,0" />
										<TextBlock Text="ビューア" Margin="0,0,16,0" />
									</WrapPanel>
								</Button.Content>
							</Button>
							<Button Height="30" Margin="8,8,8,0" Command="{Binding CodeManagerTransition}" CommandParameter="CodeManageRegister">
								<Button.Content>
									<WrapPanel Orientation="Horizontal">
										<mahIcon:PackIconCoolicons Kind="AddRow" Margin="16,0,8,0" />
										<TextBlock Text="追加" Margin="0,0,16,0" />
									</WrapPanel>
								</Button.Content>
							</Button>
							<Button Height="30" Margin="8,8,8,0" Command="{Binding CodeManagerTransition}" CommandParameter="CodeManageEditor">
								<Button.Content>
									<WrapPanel Orientation="Horizontal">
										<mahIcon:PackIconMaterial Kind="TableEdit" Margin="16,0,8,0" />
										<TextBlock Text="編集" Margin="0,0,16,0" />
									</WrapPanel>
								</Button.Content>
							</Button>
							<TextBlock Margin="4,8,0,8" Text="マスタ" />
							<Button Height="30" Margin="8,0,8,0" Command="{Binding CodeManagerTransition}" CommandParameter="CodeManageMaster" >
								<Button.Content>
									<WrapPanel Orientation="Horizontal">
										<mahIcon:PackIconMaterial Kind="DatabaseOutline" Margin="16,0,8,0"/>
										<TextBlock Text="マスタ" Margin="0,0,16,0" />
									</WrapPanel>
								</Button.Content>
							</Button>
						</VirtualizingStackPanel>
						<ToggleButton
							x:Name="ExpandToggle"
							Height="{Binding Path=ActualHeight, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type StackPanel}}}"
							Padding="1"
							VerticalAlignment="Stretch"
							Background="Gainsboro"
							IsChecked="true">
							<ToggleButton.Style>
								<Style BasedOn="{StaticResource MahApps.Styles.Button.Flat}" TargetType="{x:Type ToggleButton}">
									<Style.Triggers>
										<Trigger Property="IsChecked" Value="True">
											<Setter Property="Content" Value="{mahIcon:RadixIcons Kind=ChevronLeft}" />
										</Trigger>
										<Trigger Property="IsChecked" Value="False">
											<Setter Property="Content" Value="{mahIcon:RadixIcons Kind=ChevronRight}" />
										</Trigger>
									</Style.Triggers>
								</Style>
							</ToggleButton.Style>
						</ToggleButton>
					</VirtualizingStackPanel>
					<ContentControl prism:RegionManager.RegionName="{x:Static core:RegionNames.ContentRegion}" Grid.Column="2" Margin="16,0,0,0" />
				</Grid>
			</TabItem>
			<TabItem Style="{StaticResource MahApps.Styles.TabItem}">
				<TabItem.Header>
					<TextBlock Margin="8,0,8,0" Text="記番台帳" />
				</TabItem.Header>
				<Grid>
					<TabControl Style="{StaticResource MahApps.Styles.TabControl}">
						<TabItem Style="{StaticResource MahApps.Styles.TabItem}">
							<TabItem.Header>
								<TextBlock Margin="8,0,8,0" Text="ビューア" />
							</TabItem.Header>
							<Grid>
								<Grid.RowDefinitions>
									<RowDefinition Height="38" />
									<RowDefinition Height="Auto" />
									<RowDefinition />
								</Grid.RowDefinitions>
								<VirtualizingStackPanel Margin="4" Orientation="Horizontal">
									<TextBlock
										Margin="8,0,8,0"
										VerticalAlignment="Center"
										Text="言語種別" />
									<ComboBox
										Width="150"
										mah:TextBoxHelper.ClearTextButton="True"
										ItemsSource="{Binding LanguageClassificationsItemViewCollection.Value}"
										SelectedItem="{Binding LangViewSelectedItem.Value}">
										<i:Interaction.Triggers>
											<i:EventTrigger EventName="SelectionChanged">
												<prism:InvokeCommandAction Command="{Binding DataGridSelectComboChanged}" />
											</i:EventTrigger>
										</i:Interaction.Triggers>
									</ComboBox>
									<TextBlock
										Margin="8,0,8,0"
										VerticalAlignment="Center"
										Text="使用用途" />
									<ComboBox
										Width="200"
										mah:TextBoxHelper.ClearTextButton="True"
										ItemsSource="{Binding UseApplicationsItemViewCollection.Value}"
										SelectedItem="{Binding UseAppViewSelectedItem.Value}">
										<i:Interaction.Triggers>
											<i:EventTrigger EventName="SelectionChanged">
												<prism:InvokeCommandAction Command="{Binding DataGridSelectComboChanged}" />
											</i:EventTrigger>
										</i:Interaction.Triggers>
									</ComboBox>
									<TextBlock
										Margin="40,0,8,0"
										VerticalAlignment="Center"
										Text="検索" />
									<VirtualizingStackPanel Orientation="Horizontal">
										<TextBox
											Width="150"
											Margin="0,0,4,0"
											mah:TextBoxHelper.ClearTextButton="True"
											mah:TextBoxHelper.Watermark="開発名称"
											Text="{Binding SearchTextDevName.Value}" />
										<TextBox
											x:Name="Taaa"
											Width="150"
											Margin="0,0,4,0"
											mah:TextBoxHelper.ClearTextButton="True"
											mah:TextBoxHelper.Watermark="コードネーム"
											Text="{Binding SearchTextCodeName.Value}" />
										<ComboBox
											Width="200"
											Margin="0,0,8,0"
											mah:TextBoxHelper.ClearTextButton="True"
											mah:TextBoxHelper.Watermark="使用用途"
											ItemsSource="{Binding}" />
										<Button
											Padding="16,0,16,0"
											Command="{Binding SearchTextClaar}"
											Content="クリア" />
									</VirtualizingStackPanel>
								</VirtualizingStackPanel>
								<Separator
									Grid.Row="1"
									Margin="0,4,0,4"
									BorderBrush="White"
									BorderThickness="1" />
								<DataGrid
									Grid.Row="2"
									CanUserAddRows="False"
									CanUserDeleteRows="False"
									CanUserResizeRows="False"
									GridLinesVisibility="All"
									ItemsSource="{Binding ViewOnlyCodesDataTable.Value}"
									SelectionUnit="FullRow"
									VerticalScrollBarVisibility="Auto"
									VirtualizingPanel.IsVirtualizing="True"
									VirtualizingPanel.ScrollUnit="Pixel"
									VirtualizingPanel.VirtualizationMode="Recycling" />
							</Grid>
						</TabItem>
						<TabItem Style="{StaticResource MahApps.Styles.TabItem}">
							<TabItem.Header>
								<TextBlock Margin="8,0,8,0" Text="登録" />
							</TabItem.Header>
							<Grid>
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="Auto" />
									<ColumnDefinition />
								</Grid.ColumnDefinitions>
								<GroupBox Width="320" Padding="8">
									<GroupBox.Header>
										<TextBlock Text="記番登録処理" />
									</GroupBox.Header>
									<Grid>
										<Grid.RowDefinitions>
											<RowDefinition Height="Auto" />
											<RowDefinition />
										</Grid.RowDefinitions>
										<GroupBox>
											<GroupBox.Header>
												<TextBlock Text="登録種別" />
											</GroupBox.Header>
											<VirtualizingStackPanel Margin="8">
												<TextBlock Text="言語種別" />
												<ComboBox
													Margin="0,8,0,8"
													ItemsSource="{Binding LanguageItemCollection, Mode=OneWay}"
													SelectedValue="{Binding LanguageSelectedValue.Value, Mode=OneWayToSource}">
													<i:Interaction.Triggers>
														<i:EventTrigger EventName="SelectionChanged">
															<i:InvokeCommandAction Command="{Binding LanguageTypeComboChange}" />
														</i:EventTrigger>
													</i:Interaction.Triggers>
												</ComboBox>
												<TextBlock Text="言語種別" />
												<ComboBox
													Margin="0,8,0,8"
													ItemsSource="{Binding DevelopmentItemCollection, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
													SelectedIndex="{Binding DevItemSelectedIndex}"
													SelectedValue="{Binding DevelopmentSelectedValue.Value, Mode=OneWayToSource}">
													<i:Interaction.Triggers>
														<i:EventTrigger EventName="SelectionChanged">
															<i:InvokeCommandAction Command="{Binding DevelopmentTypeComboChange}" />
														</i:EventTrigger>
													</i:Interaction.Triggers>
												</ComboBox>
												<Border
													Width="180"
													Margin="0,8,0,8"
													Padding="8,6,8,6"
													HorizontalAlignment="Left"
													BorderBrush="White"
													BorderThickness="0.5"
													CornerRadius="5">
													<VirtualizingStackPanel Orientation="Horizontal">
														<TextBlock Text="レコード数 ：" />
														<TextBlock Text="{Binding RowsCount, Mode=OneWay}" />
													</VirtualizingStackPanel>
												</Border>
											</VirtualizingStackPanel>
										</GroupBox>
										<GroupBox
											Grid.Row="1"
											Margin="0,12,0,0"
											Visibility="{Binding GroupBoxVisibility}">
											<GroupBox.Header>
												<TextBlock Text="記番登録処理" />
											</GroupBox.Header>
											<VirtualizingStackPanel Margin="8">
												<TextBlock Text="開発名称" />
												<TextBox Margin="0,8,0,8" Text="{Binding DevelopName.Value}">
													<i:Interaction.Triggers>
														<i:EventTrigger EventName="TextChanged">
															<i:InvokeCommandAction Command="{Binding TextChanged}" />
														</i:EventTrigger>
													</i:Interaction.Triggers>
												</TextBox>
												<TextBlock Text="コードネーム" />
												<TextBox Margin="0,8,0,8" Text="{Binding CodeName.Value}" />
												<TextBlock Text="使用用途" />
												<mah:ToggleSwitch
													Margin="8,0,0,0"
													Padding="0"
													Foreground="White"
													IsOn="{Binding UseApplicationIsChecked}"
													OffCommand="{Binding CheckedStateChanged}"
													OffContent="自動"
													OnCommand="{Binding CheckedStateChanged}"
													OnContent="手動" />
												<Grid Margin="0,0,0,8" Visibility="{Binding UseApplicationComboBoxVisibility}">
													<Grid.ColumnDefinitions>
														<ColumnDefinition />
														<ColumnDefinition Width="8" />
														<ColumnDefinition />
													</Grid.ColumnDefinitions>
													<ComboBox ItemsSource="{Binding UseApplication.Value}" SelectedValue="{Binding UseApplicationSelectedValue.Value}">
														<i:Interaction.Triggers>
															<i:EventTrigger EventName="SelectionChanged">
																<i:InvokeCommandAction Command="{Binding ComboChanged}" />
															</i:EventTrigger>
														</i:Interaction.Triggers>
													</ComboBox>
													<ComboBox
														Grid.Column="2"
														ItemsSource="{Binding UseApplicationSub.Value}"
														SelectedValue="{Binding UseApplicationSubSelectedValue.Value}" />
												</Grid>
												<TextBox
													Margin="0,0,0,8"
													Text="{Binding UseApplicationManual.Value}"
													Visibility="{Binding UseApplicationTextBoxVisibility}">
													<i:Interaction.Triggers>
														<i:EventTrigger EventName="TextChanged">
															<i:InvokeCommandAction Command="{Binding TextChanged}" />
														</i:EventTrigger>
													</i:Interaction.Triggers>
												</TextBox>
												<TextBlock Text="流用番号" />
												<TextBox Margin="0,8,0,8" Text="{Binding ReferenceNumber.Value}" />
												<TextBlock Text="旧番号" />
												<TextBox Margin="0,8,0,8" Text="{Binding OldNumber.Value}" />
												<TextBlock Text="新番号" />
												<TextBox Margin="0,8,0,8" Text="{Binding NewNumber.Value}" />
												<TextBlock Text="継承元番号" />
												<TextBox Margin="0,8,0,8" Text="{Binding InheritenceNumber.Value}" />
												<TextBlock Text="説明" />
												<TextBox
													Height="60"
													Margin="0,8,0,8"
													VerticalContentAlignment="Top"
													AcceptsReturn="True"
													Text="{Binding Explanation.Value}"
													TextWrapping="Wrap" />
												<TextBlock Text="摘要" />
												<TextBox
													Height="60"
													Margin="0,8,0,8"
													VerticalContentAlignment="Top"
													AcceptsReturn="True"
													Text="{Binding Summary.Value}"
													TextWrapping="Wrap" />
												<Button
													Command="{Binding CodeNumberRegist}"
													Content="登録"
													Visibility="{Binding RegistButtonVisibility.Value}" />
											</VirtualizingStackPanel>
										</GroupBox>
									</Grid>
								</GroupBox>
								<Grid Grid.Column="1">
									<Grid.RowDefinitions>
										<RowDefinition />
										<RowDefinition Height="Auto" />
									</Grid.RowDefinitions>
									<DataGrid
										CanUserAddRows="False"
										CanUserDeleteRows="False"
										CanUserResizeRows="False"
										GridLinesVisibility="All"
										ItemsSource="{Binding DataGridItems, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
										SelectionUnit="FullRow"
										VerticalScrollBarVisibility="Auto"
										VirtualizingPanel.IsVirtualizing="True"
										VirtualizingPanel.ScrollUnit="Pixel"
										VirtualizingPanel.VirtualizationMode="Recycling" />
									<mdMetro:Snackbar Grid.Row="1" MessageQueue="{Binding}" />
								</Grid>
							</Grid>
						</TabItem>
						<TabItem Style="{StaticResource MahApps.Styles.TabItem}">
							<TabItem.Header>
								<TextBlock Margin="8,0,8,0" Text="編集" />
							</TabItem.Header>
						</TabItem>
						<TabItem Style="{StaticResource MahApps.Styles.TabItem}">
							<TabItem.Header>
								<TextBlock Margin="8,0,8,0" Text="マスタ一覧" />
							</TabItem.Header>
							<Grid>
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="Auto" />
									<ColumnDefinition Width="Auto" />
									<ColumnDefinition />
								</Grid.ColumnDefinitions>
								<Grid.RowDefinitions>
									<RowDefinition />
								</Grid.RowDefinitions>
								<GroupBox x:Name="DatabaseRegisterGroupBox" Width="290">
									<GroupBox.Header>
										<TextBlock Text="データベース接続" />
									</GroupBox.Header>
									<StackPanel Margin="8">
										<TextBlock Text="サーバー名" />
										<TextBox Margin="0,8,0,8" Text="{Binding Server.Value}" />
										<TextBlock Text="ユーザー名" />
										<TextBox Margin="0,8,0,8" Text="{Binding User.Value}" />
										<TextBlock Text="データベース名" />
										<TextBox Margin="0,8,0,8" Text="{Binding Database.Value}" />
										<TextBlock Text="パスワード名" />
										<TextBox Margin="0,8,0,8" Text="{Binding Password.Value}" />
										<CheckBox Margin="0,8,0,8" IsChecked="{Binding PersistSecurityInfo.Value}">
											<CheckBox.Content>
												<TextBlock Foreground="White" Text="Persist Security Info" />
											</CheckBox.Content>
										</CheckBox>
										<Button
											Margin="0,8,0,8"
											Command="{Binding RegistSqlConnectionString}"
											Content="登録" />
										<Button
											Margin="0,8,0,16"
											Command="{Binding SqlConnectionTest}"
											Content="接続テスト"
											Foreground="SpringGreen" />
										<mdMetro:Snackbar Width="{Binding ElementName=DatabaseRegisterGroupBox, Path=Width}" MessageQueue="{Binding SnackBarMessageQueue}" />
										<StackPanel />
									</StackPanel>
								</GroupBox>
								<GroupBox Grid.Column="1" Padding="8">
									<GroupBox.Header>
										<TextBlock Text="マスタ" />
									</GroupBox.Header>
									<StackPanel>
										<StackPanel Orientation="Horizontal">
											<RadioButton Content="追加" IsChecked="{Binding AddRadioIsChecked.Value}" />
											<RadioButton
												Margin="16,0,16,0"
												Content="編集"
												IsChecked="{Binding EditRadioIsChecked.Value}" />
											<RadioButton Content="削除" IsChecked="{Binding DeleteRadioIsChecked.Value}" />
										</StackPanel>
										<TextBlock Margin="0,8,0,8" Text="テーブル選択" />
										<ComboBox ItemsSource="{Binding DatabaseTables.Value}" SelectedValue="{Binding DBTableSelectedValue.Value}">
											<i:Interaction.Triggers>
												<i:EventTrigger EventName="SelectionChanged">
													<prism:InvokeCommandAction Command="{Binding TableSelectionChange}" />
												</i:EventTrigger>
											</i:Interaction.Triggers>
										</ComboBox>
										<GroupBox Margin="0,8,0,0">
											<GroupBox.Header>
												<TextBlock Text="選択" />
											</GroupBox.Header>
											<ItemsControl ItemsSource="{Binding DBTableColumnsFieldItems.Value}">
												<ItemsControl.ItemsPanel>
													<ItemsPanelTemplate>
														<VirtualizingStackPanel />
													</ItemsPanelTemplate>
												</ItemsControl.ItemsPanel>
												<ItemsControl.ItemTemplate>
													<DataTemplate>
														<Grid Margin="0,4,0,4">
															<Grid.ColumnDefinitions>
																<ColumnDefinition Width="150" />
																<ColumnDefinition Width="200" />
															</Grid.ColumnDefinitions>
															<TextBlock Text="{Binding ColumnName}" />
															<TextBox Grid.Column="1" Text="{Binding FieldValue}" />
														</Grid>
													</DataTemplate>
												</ItemsControl.ItemTemplate>
											</ItemsControl>
										</GroupBox>
									</StackPanel>
								</GroupBox>
								<DataGrid
									Grid.Column="2"
									CanUserAddRows="False"
									CanUserDeleteRows="False"
									CanUserResizeRows="False"
									GridLinesVisibility="All"
									ItemsSource="{Binding TableDataGridItem.Value}"
									SelectionUnit="FullRow"
									VerticalScrollBarVisibility="Auto"
									VirtualizingPanel.IsVirtualizing="True"
									VirtualizingPanel.ScrollUnit="Pixel"
									VirtualizingPanel.VirtualizationMode="Recycling" />
							</Grid>
						</TabItem>
					</TabControl>
				</Grid>
			</TabItem>
		</TabControl>
		<!--ContentControl prism:RegionManager.RegionName="{x:Static core:RegionNames.ContentRegion}"/-->

		<StatusBar Grid.Row="2">
			<StatusBarItem Content="CodeManager" />
			<Separator Style="{StaticResource MahApps.Styles.Separator.StatusBar}" />
			<StatusBarItem Content="Selected Tab:" />
			<Separator Style="{StaticResource MahApps.Styles.Separator.StatusBar}" />
			<StatusBarItem Content="{Binding ProjectDirectryText}" />
		</StatusBar>
	</Grid>
</Window>
